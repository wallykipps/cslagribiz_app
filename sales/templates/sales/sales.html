{% extends "dashboard/layout.html" %}
{% block content %}

<div class="row">
  <div class="col-lg-3 pt-4">
    <h3><i class="fas fa-table mr-3"></i>Sales</h3>
  </div>

  <div class="container col-lg-9 pt-4" >
    <a href="#" class="btn btn-outline-secondary btn-sm mr-1 float-right ml-1" role="button"><i class="fas fa-download mr-2"></i>Export</a>
    <a href="{%url 'customers'%}" class="btn btn-outline-primary btn-sm ml-1 float-right mr-1" role="button"><i class="fas fa-users mr-2"></i>Customers</a>
    <button type="button" class="btn btn-outline-success btn-sm ml-1 float-right mr-1" data-toggle="modal" data-target="#salesReg"><i class="fas fa-plus mr-2"></i>Add New Sale</button>
  </div>

</div>
<hr></hr>


<form method="post" id="salesform" action="{% url 'postsale'%}">
  {% csrf_token %}
  <!-- The Modal -->
  <div class="modal fade" id="salesReg">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Sales Registration</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">

          <div class="form-row ml-3">
            <h5 class="text-secondary">Date:</h5>
          </div>

          <div class="col">
            <label class="sr-only" for="date">date</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-calendar-alt"></i></div>
              </div>
              <input type="date" class="form-control" id="date" name="date" placeholder="Date" required>
            </div>
          </div>

          <div class="form-row mt-4 ml-3">
            <h5 class="text-secondary">Customer Details:</h5>
          </div>

          <div class="col">
            <label class="sr-only" for="customer">Customer</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-user"></i></div>
              </div>
              <input type="text" class="form-control"  id="customer"  name="customer" placeholder="Customer">
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="phonenumber">Phone Number</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-mobile-alt"></i></div>
              </div>
              <input type="text" class="form-control" id="phonenumber" name="phonenumber" placeholder="Phone Number">
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="location">Location</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class=" 	fas fa-map-marker-alt"></i></div>
              </div>
              <input type="text" class="form-control" id="location" name="location" placeholder="Location">
            </div>
          </div>

          <div class="form-row mt-4 ml-3">
            <h5 class="text-secondary">Sales Details:</h5>
          </div>

          <div class="col">
            <label class="sr-only" for="product">Product</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-shopping-basket"></i></div>
              </div>
              <select type="text" class="form-control"  id="product" name="product" placeholder="Product" required>
                <option style="color:grey" value="">Product</option>
                <option value="eggs">Eggs</option>
                <option value="ex-layers">Ex-layers</option>
              </select>
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="unitmeasure">Package</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-gift"></i></div>
              </div>
              <select type="text" class="form-control"  id="unitmeasure" name="unitmeasure" placeholder="Package" required>
                <option style="color:grey" value="">Package</option>
                <option>Crates</option>
                <option>Single Eggs</option>
                <option>Birds</option>
              </select>
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="units">Quantity</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text "><i class="fas fa-calculator"></i></div>
              </div>
                <input type="number" class="form-control"  id="units" name="units" placeholder="Quantity" required>
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="unitprice">Price</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-money-bill-alt"></i></div>
              </div>
            <input type="number" class="form-control"  id="unitprice" name="unitprice" placeholder="Unit Price" required>
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="paymentmode">Payment Mode</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="fas fa-handshake"></i></div>
              </div>
              <select type="text" class="form-control"  id="paymentmode" name="paymentmode" placeholder="Payment Mode" required>
                <option style="color:grey" value="">Payment Mode</option>
                <option style="color:black">Cash</option>
                <option style="color:black">Credit</option>
              </select>
            </div>
          </div>

          <div class="col">
            <label class="sr-only" for="salesperson">Sales Person</label>
            <div class="input-group mb-2 mr-2">
              <div class="input-group-prepend">
                <div class="input-group-text"><i class="far fa-user-circle"></i></div>
              </div>
              <select type="text" class="form-control"  id="salesperson" name="salesperson" placeholder="Salesperson" required>
                <option style="color:gray" value="">Salesperson</option>
                <option>Kiptoo</option>
                <option>Walter</option>
                <option>Newton</option>
              </select>
            </div>
          </div>


        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button class="btn btn-primary ml-2" type="submit" id="btnSubmit" onclick="myRefresh">Submit</button>
          <button class="btn btn-secondary ml-2" id="btnReset" type="reset">Reset</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>

</form>


<div class="row">
  <div class="col-lg-12">
    <!--<a href="#" class="btn btn-success" id="menu-toggle">Toggle Menu</span></a>-->
    <div class="table-responsive">
      <table class="table table-striped table-sm border" id="sales" data-toggle="table"   data-pagination="true" data-search="true">
        <thead class="table-secondary">
          <tr>
            <th>Date</th>
            <th>Customer</th>
            <th>Phone Number</th>
            <th class="text-center">Location</th>
            <th>Sales Person</th>
            <th class="text-center">Product</th>
            <th class="text-center">Payment Mode</th>
            <th class="text-center">Package</th>
            <th class="text-center">Quantity</th>
            <th class="text-center">Unit Price</th>
            <th class="text-right">Total</th>

          </tr>
        </thead>
        <tbody>

          {% for sale in sales.all %}
          <tr>
            <td class="font-weight-light">{{sale.date1}}</td>
            <td class="font-weight-light">{{sale.customer}}</td>
            <td class="font-weight-light">{{sale.phonenumber}}</td>
            <td class="font-weight-light text-center">{{sale.location}}</td>
            <td class="font-weight-light">{{sale.salesperson}}</td>
            <td class="font-weight-light text-center">{{sale.product}}</td>
            <td class="font-weight-light text-center">{{sale.paymentmode}}</td>
            <td class="font-weight-light text-center">{{sale.unitmeasure}}</td>
            <td class="font-weight-light text-center">{{sale.units}}</td>
            <td class="font-weight-light text-center">{{sale.unitprice}}</td>
            <td class="font-weight-light text-right">{{sale.total}}</td>

          </tr>
          {% endfor %}

        </tbody>
      </table>
    </div>
    <!--
    <div class="card mb-4">
    <div class="card-header bg-secondary"><i class="fas fa-table mr-1"></i>Sales Records</div>
    <div class="card-body">

  </div>
</div>
-->


</div>
</div>
{% endblock %}
